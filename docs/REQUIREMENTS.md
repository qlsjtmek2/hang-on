# 요구사항 명세서

**프로젝트명**: 잠깐! (Hang On!)
**버전**: 1.0.0
**최종 업데이트**: 2025-11-09
**작성자**: Requirements Analysis Team

---

## 📋 목차

1. [프로젝트 개요](#프로젝트-개요)
2. [핵심 가치 및 목표](#핵심-가치-및-목표)
3. [기능적 요구사항](#기능적-요구사항)
4. [비기능적 요구사항](#비기능적-요구사항)
5. [UI/UX 가이드라인](#uiux-가이드라인)
6. [우선순위 및 로드맵](#우선순위-및-로드맵)
7. [성공 지표](#성공-지표)
8. [위험 요소 및 대응](#위험-요소-및-대응)
9. [기술 스택](#기술-스택)

---

## 프로젝트 개요

### 앱 소개

**Hang On**은 익명성 기반 감정 공유 및 상호 공감 플랫폼입니다. 사용자는 자신의 감정 상태를 5단계 날씨로 표현하고, 비슷한 감정을 느끼는 다른 사람들과 익명으로 연결되어 공감과 위로를 주고받을 수 있습니다.

### 핵심 차별점

- **완전 익명성**: 작성자 식별 정보 일체 노출 안 함
- **감정 유사도 기반 매칭**: 비슷한 감정을 느끼는 사람들끼리 연결
- **비강제적 상호작용**: 하트(공감)와 간단한 메시지 프리셋만 제공
- **일일 제한**: 하루 20개 기록만 조회 가능 (과몰입 방지)

### 타겟 사용자

- 감정적 지지가 필요하지만 신원 노출을 원하지 않는 사람
- 일상적인 감정을 기록하고 싶은 사람
- 타인과의 공감을 통해 위로받고 싶은 사람

---

## 핵심 가치 및 목표

### 핵심 가치

1. **익명성**: 완전한 익명 속에서 안전하게 감정 표현
2. **공감**: 비슷한 감정을 느끼는 사람들과의 연결
3. **간결함**: 복잡하지 않은 직관적인 상호작용
4. **안전**: 부적절한 콘텐츠로부터 보호

### 비즈니스 목표

- **D30 유지율**: 10% 이상
- **일일 활성 사용자(DAU)**: 출시 6개월 내 10,000명
- **평균 주간 기록 횟수**: 사용자당 3회 이상

---

## 기능적 요구사항

### 1. 털어놓기 (Emotion Journal)

#### 1.1 감정 상태 선택

**우선순위**: P0 (MVP 필수)

**요구사항**:
- 5단계 감정 레벨 선택 (최상/상/중/하/최하)
- 각 레벨을 날씨로 시각화

**감정-날씨 매핑**:

| 레벨 | 날씨 | 이모지 | 색상 | 의미 |
|------|------|--------|------|------|
| 5 (최상) | 맑음 | ☀️ | `#FFD700` (골드) | 행복, 기쁨 |
| 4 (상) | 구름 조금 | 🌤️ | `#87CEEB` (하늘색) | 평온, 만족 |
| 3 (중) | 흐림 | ☁️ | `#A9A9A9` (회색) | 중립, 무덤덤 |
| 2 (하) | 비 | 🌧️ | `#708090` (슬레이트) | 슬픔, 우울 |
| 1 (최하) | 폭풍 | ⛈️ | `#483D8B` (다크슬레이트) | 고통, 절망 |

**UI 플로우**:
1. 날씨 아이콘 5개를 가로 또는 원형으로 배치
2. 사용자가 탭하여 선택
3. 선택된 아이콘은 확대 + 색상 강조

**성공 지표**: 감정 선택 완료율 95% 이상

---

#### 1.2 글쓰기

**우선순위**: P0 (MVP 필수)

**요구사항**:
- 최대 500자 텍스트 입력
- 플레이스홀더: "지금 느끼는 기분, 마음, 감정을 자유롭게 표현해보세요"
- 실시간 글자 수 표시 (예: 137/500)
- 글 작성 없이도 제출 가능 (감정 상태만 저장)

**제외 사항 (MVP)**:
- ❌ Markdown 지원 (향후 고려)
- ❌ 이미지 첨부

**에러 처리**:
- 500자 초과 시: 실시간 글자 색상 변경 (빨간색) + "500자를 초과했어요" 툴팁
- 네트워크 오류 시: 로컬 임시 저장 → 재접속 시 복구 팝업

---

#### 1.3 공유 설정

**우선순위**: P0 (MVP 필수)

**3가지 옵션**:

1. **혼자 간직하기**
   - 비공개, "누군가와 함께"에 노출 안 됨
   - 설명: "나만 볼 수 있어요"

2. **내일 나누기**
   - 다음 날 00:00 (사용자 타임존) 자동 공개
   - 설명: "내일 00:00에 공개돼요"
   - 시스템 크론잡이 자동 전환

3. **지금 나누기**
   - 즉시 공개, 감정 유사도 매칭 풀에 추가
   - 설명: "지금 누군가에게 전달돼요"

**공개 설정 변경**:
- 언제든 변경 가능
- 변경 시 확인 다이얼로그: "이 기록을 [공개/비공개]로 변경할까요?"
- 공개 → 비공개 전환 시: 모든 사용자에게 즉시 숨김 (이미 본 사람도 볼 수 없음)

**UI/UX**:
- 작성 완료 후 "다 썼어요! 💙" 버튼
- 공유 옵션 바텀시트 표시

---

#### 1.4 기록 관리

**우선순위**: P0 (MVP 필수)

**조회**:
- 메인 화면에서 자신의 기록 목록 조회
- 시간순 정렬 (최신순)
- 각 기록 카드 표시 정보:
  - 감정 상태 (날씨 아이콘)
  - 작성 시간 (예: "5분 전", "오늘 오전 10:30")
  - 글 내용 미리보기 (2줄, 말줄임표)
  - 받은 공감 수 (하트 아이콘 + 숫자)
  - 받은 메시지 수 (메시지 아이콘 + 숫자)

**수정**:
- 언제든 수정 가능
- 수정 후에도 기존 공감/메시지 유지
- 수정 이력 추적: ❌ (MVP 제외, Phase 2 고려)

**삭제**:
- 언제든 삭제 가능
- Soft Delete 방식 (복구 가능 기간: 30일)
- 삭제 확인: "이 기록을 삭제할까요? 받은 공감과 메시지도 함께 사라져요."
- 삭제 효과:
  - 작성자에게 보이지 않음
  - "누군가와 함께"에서 즉시 제거
  - 받았던 공감/메시지 데이터는 보존 (통계 목적, 표시는 안 됨)

---

### 2. 누군가와 함께 (Empathy Feed)

#### 2.1 감정 유사도 매칭

**우선순위**: P0 (MVP 필수)

**매칭 알고리즘**:
1. 사용자의 최근 3개 기록 감정 레벨 분석
2. 평균 감정 레벨 계산 (예: 2.3)
3. ±1 범위 내 기록 우선 매칭 (예: 1.3~3.3)
4. 같은 감정 레벨 우선, 그 다음 ±1 레벨
5. 자신의 기록 제외
6. 이미 본 기록 제외 (하루 동안만 기억)
7. 20개까지 반환

**폴백 (Fallback)**:
- 유사 감정이 20개 미만: 무작위로 채움
- 전체 기록이 0개: "아직 오늘의 이야기가 도착하지 않았어요. 잠시 후 다시 와주세요." + 새로고침 버튼

**성공 지표**: 평균 매칭 정확도 70% 이상 (사용자 설문 기반)

---

#### 2.2 일일 조회 제한

**우선순위**: P0 (MVP 필수)

**요구사항**:
- 하루 20개 기록만 조회 가능
- 자정 00:00 (사용자 타임존) 리셋
- 조회한 기록은 하루 동안만 기억 (다음 날 같은 기록 재노출 가능)

**UI**:
- 남은 조회 수 표시: 헤더에 "오늘 남은 이야기: 15/20"
- 제한 도달 시: "오늘은 모두 읽었어요. 내일 다시 와주세요 💙"

**기술 구현**:
- 매일 자정에 조회 기록 초기화 (크론잡)

---

#### 2.3 공감 및 메시지 전송

**우선순위**: P0 (MVP 필수)

**공감 (하트)**:
- 한 기록당 1번만 공감 가능
- 공감 취소 불가 (의도적 설계: 진정성 유지)
- 실시간 애니메이션: 하트 아이콘 펄스 효과

**메시지 프리셋**:
- 3-5개 프리셋 제공 (MVP)
- 한 기록당 1개 메시지만 전송 가능
- 메시지 취소 불가
- 다국어 자동 번역 (6개 국어)

**기본 프리셋 (한국어)**:

| 프리셋 키 | 텍스트 | 이모지 |
|-----------|--------|--------|
| `cheer_up` | 힘내세요 | 💪 |
| `me_too` | 저도 그래요 | 🫂 |
| `be_okay` | 괜찮을 거예요 | 🌈 |
| `together` | 함께해요 | ✨ |

**알림**:
- 공감/메시지 수신 시 푸시 알림
- 알림 메시지: "누군가 당신의 마음에 공감했어요 💙"
- 메인 화면 기록 카드에 뱃지 표시 (새로운 공감 수)

---

#### 2.4 익명성 보장

**우선순위**: P0 (MVP 필수)

**표시 정보** (최소화):
- ✅ 감정 상태 (날씨 아이콘)
- ✅ 작성 시간 (상대적 시간: "5분 전", "3시간 전", "오늘 오전")
- ✅ 글 내용

**숨김 정보**:
- ❌ 작성자 식별 정보 (이름, 닉네임, ID 등)
- ❌ 프로필 사진
- ❌ 위치 정보
- ❌ 연령/성별

**완전 익명성**: 같은 사용자의 여러 기록도 구별 불가

---

### 3. 콘텐츠 모더레이션

#### 3.1 신고 시스템

**우선순위**: P0 (MVP 필수)

**요구사항**:
- 각 기록에 "신고하기" 버튼 (더보기 메뉴 내)
- 신고 사유 선택:
  - 욕설/혐오 표현
  - 스팸/광고
  - 자해/자살 암시
  - 개인정보 노출
  - 기타 (직접 입력)

**처리 프로세스**:
1. 신고 접수 시 관리자 대시보드에 알림
2. 신고 후 해당 기록 자동 숨김 (신고자에게만)
3. 신고 3회 이상 → 자동 임시 숨김 + 수동 검토
4. 검토 후 조치: 경고, 기록 삭제, 계정 정지

**우선 검토 기준**: 자해/자살 암시 신고는 1시간 내 검토

---

### 4. 인증 및 계정 관리

#### 4.1 회원가입

**우선순위**: P0 (MVP 필수)

**지원 방법**:

1. **이메일/비밀번호**
   - 이메일 형식 검증
   - 비밀번호 최소 요구사항: 8자 이상
   - 이메일 인증: Phase 2로 연기 가능

2. **Google 소셜 로그인**
   - OAuth 2.0
   - 이메일 정보만 수집

**최소 정보 수집**: 이메일만 (익명성 유지)

**게스트 모드**: ❌ (데이터 손실 방지)

---

#### 4.2 로그인

**우선순위**: P0 (MVP 필수)

**요구사항**:
- 자동 로그인 (7일간 세션 유지)
- 비밀번호 찾기 (이메일 링크)
- 5회 연속 실패 시 15분 잠금

---

#### 4.3 계정 설정

**우선순위**: P0 (MVP 필수)

**기능**:
- 푸시 알림 On/Off 토글
- 언어 변경 (6개 국어)
- 로그아웃
- 계정 삭제
  - 삭제 확인: "모든 기록과 공감이 영구 삭제됩니다. 정말 삭제할까요?"
  - 삭제 후: 모든 데이터 즉시 삭제 (GDPR 준수)

**기타**:
- 개발자에게 문의 (mailto: 링크)
- 개인정보 처리방침 (웹뷰)
- 이용약관 (웹뷰)

---

### 5. 다국어 지원

#### 5.1 지원 언어

**우선순위**: P0 (MVP 필수)

**언어 목록**:
1. 한국어 (ko)
2. 영어 (en)
3. 일본어 (ja)
4. 스페인어 (es)
5. 포르투갈어 (pt)
6. 프랑스어 (fr)

---

#### 5.2 번역 범위

**UI 텍스트**: 모든 버튼, 레이블, 메시지

**메시지 프리셋**: 6개 언어 모두 번역

**사용자 작성 글**: ❌ 자동 번역 안 함 (원문 그대로 표시)

**감정 상태 (날씨)**: 아이콘 + 각 언어별 텍스트

---

#### 5.3 언어 감지

**기본 언어**: 디바이스 언어 설정 자동 감지

**수동 변경**: 설정에서 언어 선택

---

## 비기능적 요구사항

### 1. 성능

| 지표 | 목표 | 측정 방법 |
|------|------|-----------|
| 앱 실행 시간 | < 3초 | 스플래시 → 메인 화면 |
| 기록 로딩 시간 | < 2초 | API 호출 → 렌더링 완료 |
| 공감 전송 응답 | < 1초 | 버튼 탭 → 성공 애니메이션 |
| 매칭 알고리즘 | < 500ms | 쿼리 실행 시간 |
| 동시 접속 지원 | 1,000명 (초기) | 부하 테스트 |

---

### 2. 확장성

**데이터베이스**: Supabase Postgres
- 인덱싱: `emotionLevel`, `createdAt`, `visibility`
- 파티셔닝: 월별 테이블 분할 (기록 1백만 개 이상 시)

**스토리지**: 사용자당 평균 10KB (텍스트만)

**6개월 후 예상 부하**:
- 사용자: 10,000명
- 일일 기록: 5,000개
- 총 저장 용량: ~3GB

---

### 3. 보안

**전송 암호화**: HTTPS 필수

**인증**: JWT 토큰 (7일 유효기간)

**Row Level Security (RLS)**:
- 사용자는 자신의 비공개 기록만 조회
- 공개 기록은 모두 조회 가능 (단, 작성자 ID 숨김)

**OWASP Top 10 준수**:
- SQL Injection 방지 (Supabase ORM)
- XSS 방지 (사용자 입력 sanitize)

---

### 4. 접근성 (Accessibility)

**WCAG 2.1 AA 준수**

**요구사항**:
- 스크린 리더 지원: 모든 버튼 및 레이블
- 색상 대비: 최소 4.5:1
- 폰트 크기: 최소 14sp, 사용자 조절 가능
- 터치 타겟: 최소 44x44pt

---

### 2. 메시지 프리셋

#### 다국어 프리셋 매핑

| 프리셋 키 | 한국어 | 영어 | 일본어 | 스페인어 | 포르투갈어 | 프랑스어 |
|-----------|--------|------|--------|----------|------------|----------|
| `cheer_up` | 힘내세요 💪 | Cheer up 💪 | 頑張って 💪 | Ánimo 💪 | Força 💪 | Courage 💪 |
| `me_too` | 저도 그래요 🫂 | Me too 🫂 | 私もです 🫂 | Yo también 🫂 | Eu também 🫂 | Moi aussi 🫂 |
| `be_okay` | 괜찮을 거예요 🌈 | It'll be okay 🌈 | 大丈夫だよ 🌈 | Estará bien 🌈 | Vai ficar tudo bem 🌈 | Ça ira 🌈 |
| `together` | 함께해요 ✨ | We're together ✨ | 一緒にいます ✨ | Estamos juntos ✨ | Estamos juntos ✨ | Ensemble ✨ |

---

### B. 관련 문서

- **API 명세서**: `docs/API_SPEC.md`
- **프로젝트 가이드**: `CLAUDE.md`
- **스킬 시스템**: `.claude/skills/`

---

**문서 버전**: 1.0.0
**최종 업데이트**: 2025-11-09
**다음 리뷰**: Phase 0 완료 후
